<?xml version="1.0"?>
<mavlink>
  <include>common.xml</include>
  <!-- vendors -->
  <dialect>2</dialect>
  <!-- note that APM specific messages should use the command id range from 150 to 250, to leave plenty of room for growth of common.xml If you prototype a message here, then you should consider if it is general enough to move into common.xml later -->
  <enums>
    <enum name="MACE_MISSION_TYPE">
      <description>Type of mission items being requested/sent in mission protocol.</description>
      <entry value="0" name="MACE_MISSION_TYPE_AUTO">
        <description>Items are mission commands for main auto mission.</description>
      </entry>
      <entry value="1" name="MACE_MISSION_TYPE_GUIDED">
        <description>Items are mission commands for guided mission.</description>
      </entry>
      <entry value="2" name="MACE_MISSION_TYPE_ROI">
        <description>Items are regions of interest that the vehicle should visit in a guided mission.</description>
      </entry>
      <entry value="3" name="MACE_MISSION_TYPE_FENCE">
        <description>Specifies GeoFence area(s). Items are MAV_CMD_FENCE_ GeoFence items.</description>
      </entry>
      <entry value="4" name="MACE_MISSION_TYPE_RALLY">
        <description>Specifies the rally points for the vehicle. Rally points are alternative RTL points. Items are MAV_CMD_RALLY_POINT rally point items.</description>
      </entry>
      <entry value="255" name="MACE_MISSION_TYPE_ALL">
        <description>Only used in MISSION_CLEAR_ALL to clear all mission types.</description>
      </entry>
    </enum>
    <enum name="MACE_MISSION_STATE">
      <description>Type of mission items being requested/sent in mission protocol.</description>
      <entry value="0" name="MACE_MISSION_CURRENT">
        <description>Items are mission commands for main auto mission and are received via the autopilot and aircraft module.</description>
      </entry>
      <entry value="1" name="MACE_MISSION_ONBOARD">
        <description>Items are mission ready and have been acknowledged by the aircraft module for processing.</description>
      </entry>
      <entry value="2" name="MACE_MISSION_PROPOSED">
        <description>Items are mission ready but have been generated by a module not related to the aircraft and need to be pushed towards the appropriate aircraft module.</description>
      </entry>
      <entry value="3" name="MACE_MISSION_TRANSMITTED">
        <description>Items have been distributed and received by the appropriate MACE instance connected to the associated aircraft module.</description>
      </entry>
    </enum>
    <enum name="MACE_MISSION_ACK">
      <description>The type of acknowledgement the vehicle can have with a mission item.</description>
      <entry value="0" name="MACE_MISSION_ACK_DENIED">
        <description>The mission was not accepted by the aircraft.</description>
      </entry>
      <entry value="1" name="MACE_MISSION_ACK_ACCEPTED">
        <description>The mission was accepted by the aircraft</description>
      </entry>
      <entry value="2" name="MACE_MISSION_ACK_ACCEPTED_CHANGED_TYPE">
        <description>The mission was accepted by the aircraft however the type was unsupported and therefore changed.</description>
      </entry>
      <entry value="3" name="MACE_MISSION_ACK_ACCEPTED_CHANGED_KEY">
        <description>The mission was accepted by the aircraft and associated module, however, the key required changing.</description>
      </entry>
    </enum>
    <enum name="MACE_POINT_DISCOVERY">
      <description>Type of mission items being requested/sent in mission protocol.</description>
      <entry value="0" name="MACE_POINT_DISCOVERY_EXISTING">
        <description>The point reported is an existing point in the list relative to the original assignment.</description>
      </entry>
      <entry value="1" name="MACE_POINT_DISCOVERY_NEW">
        <description>The point reported is newly discovered relative to the list initially recieved.</description>
      </entry>
    </enum>
    <enum name="MACE_STRESS_THRESHOLD">
      <description>Type of mission items being requested/sent in mission protocol.</description>
      <entry value="0" name="MACE_STRESS_THRESHOLD_STRESS_MAX">
        <description>State of the stress point has been confirmed at a maximum.</description>
      </entry>
      <entry value="1" name="MACE_STRESS_THRESHOLD_AMBIGUOUS">
        <description>State of the stress point has yet to be confirmed.</description>
      </entry>
      <entry value="2" name="MACE_STRESS_THRESHOLD_STRESS_MIN">
        <description>State of the stress point has been confirmed at a minimum.</description>
      </entry>
    </enum>
  </enums>
  <messages>
    <message id="180" name="MACE_STARTING_CURRENT_MISSION">
      <description>This message is emitted when an aircraft starts a new mission. This could be caused by a mode change, or new mission as sent via a control module. The response to this may vary depending upon the knowledge and/or state of the receiving system. Systems recieving this system either acknowledge its existance in comparison with items in its queue, or, if further information is required, a mission request can be sent.</description>
      <field type="uint8_t" name="mission_system">Mission System ID</field>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
    </message>
    <message id="181" name="MACE_NEW_ONBOARD_MISSION">
      <description>This message is emitted currently under one circumstances. A vehicle may emit this when its local planners have developed a new mission for the vehicle and have updated one of its queues. The count of the mission items in this queue is sent as its more direct method of enabling other mace instances for transmission</description>
      <field type="uint8_t" name="mission_system">Mission System ID</field>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
      <field type="uint8_t" name="mission_state" enum="MACE_MISSION_STATE">Mission type, see MACE_MISSION_STATE</field>
      <field type="uint16_t" name="count">Number of mission items in the sequence</field>
    </message>
    <message id="182" name="MACE_NEW_PROPOSED_MISSION">
      <description>This message is emitted currently under one circumstances. A GCS equipped station may emit this message in order to initiate a write transaction.</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
      <field type="uint8_t" name="mission_state" enum="MACE_MISSION_STATE">Mission type, see MACE_MISSION_STATE</field>
      <field type="uint16_t" name="count">Number of mission items in the sequence</field>
    </message>
    <message id="183" name="MACE_ACK_MISSION">
      <description>This message is emitted after a mace has finished receiving a mission from another MACE instance. Seeing this response should cause MACE core to update the mission to the appropriate queue and notify other modules of the change based on the mission state received.</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="mission_system">Mission System ID</field>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
      <field type="uint8_t" name="mission_state" enum="MACE_MISSION_STATE">The potentiall new mission state, see MACE_MISSION_STATE</field>
    </message>
    <message id="184" name="MACE_MISSION_REQUEST_LIST">
      <description>Request the mission related from the target system with the appropirate mission type and state. The response to this message should be MACE_MISSION_COUNT.</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
      <field type="uint8_t" name="mission_state" enum="MACE_MISSION_STATE">Mission type, see MACE_MISSION_STATE</field>
    </message>
   <message id="185" name="MACE_MISSION_COUNT">
      <description>This message is emitted as response to MISSION_REQUEST_LIST by the MAV and to initiate a write transaction. The GCS can then request the individual mission item based on the knowledge of the total number of MISSIONs.</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="mission_system">Mission System ID</field>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
      <field type="uint8_t" name="mission_state" enum="MACE_MISSION_STATE">Mission type, see MACE_MISSION_STATE</field>
      <field type="uint16_t" name="count">Number of mission items in the sequence</field>
    </message>
     <message id="186" name="MACE_MISSION_REQUEST_PARTIAL_LIST">
      <description>Request a partial list of mission items from the system/component. http://qgroundcontrol.org/mavlink/waypoint_protocol. If start and end index are the same, just send one waypoint.</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="target_component">Component ID</field>
      <field type="int16_t" name="start_index">Start index, 0 by default</field>
      <field type="int16_t" name="end_index">End index, -1 by default (-1: send list to end). Else a valid index of the list</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
    </message>
    <message id="187" name="MACE_MISSION_WRITE_PARTIAL_LIST">
      <description>This message is sent to the MAV to write a partial list. If start index == end index, only one item will be transmitted / updated. If the start index is NOT 0 and above the current list size, this request should be REJECTED!</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="target_component">Component ID</field>
      <field type="int16_t" name="start_index">Start index, 0 by default and smaller / equal to the largest index of the current onboard list.</field>
      <field type="int16_t" name="end_index">End index, equal or greater than start index.</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
    </message>
    <message id="188" name="MACE_MISSION_ITEM">
      <description>Message encoding a mission item. This message is emitted to announce
                the presence of a mission item and to set a mission item on the system. The mission item can be either in x, y, z meters (type: LOCAL) or x:lat, y:lon, z:altitude. Local frame is Z-down, right handed (NED), global frame is Z-up, right handed (ENU). See also http://qgroundcontrol.org/mavlink/waypoint_protocol.</description>
      <field type="uint8_t" name="target_system">Target System ID</field>
      <field type="uint8_t" name="mission_system">Mission System ID</field>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
      <field type="uint16_t" name="seq">Sequence</field>
      <field type="uint8_t" name="frame" enum="MAV_FRAME">The coordinate system of the MISSION. see MAV_FRAME in mavlink_types.h</field>
      <field type="uint16_t" name="command" enum="MAV_CMD">The scheduled action for the MISSION. see MAV_CMD in common.xml MAVLink specs</field>
      <field type="uint8_t" name="current">false:0, true:1</field>
      <field type="uint8_t" name="autocontinue">autocontinue to next wp</field>
      <field type="float" name="param1">PARAM1, see MAV_CMD enum</field>
      <field type="float" name="param2">PARAM2, see MAV_CMD enum</field>
      <field type="float" name="param3">PARAM3, see MAV_CMD enum</field>
      <field type="float" name="param4">PARAM4, see MAV_CMD enum</field>
      <field type="float" name="x">PARAM5 / local: x position, global: latitude</field>
      <field type="float" name="y">PARAM6 / y position: global: longitude</field>
      <field type="float" name="z">PARAM7 / z position: global: altitude (relative or absolute, depending on frame.</field>
    </message>
    <message id="189" name="MACE_MISSION_REQUEST_ITEM">
      <description>Request the information of the mission item with the sequence number seq. The response of the system to this message should be a MISSION_ITEM message. http://qgroundcontrol.org/mavlink/waypoint_protocol</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="mission_system">Mission System ID</field>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
      <field type="uint16_t" name="seq">Sequence</field>
    </message>
    <message id="190" name="MACE_MISSION_SET_CURRENT">
      <description>Set the mission item with sequence number seq as current item. This means that the MAV will continue to this mission item on the shortest path (not following the mission items in-between).</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
      <field type="uint16_t" name="seq">Sequence</field>
    </message>
    <message id="191" name="MACE_MISSION_CURRENT">
      <description>Message that announces the sequence number of the current active mission item. The MAV will fly towards this mission item.</description>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
      <field type="uint16_t" name="seq">Sequence</field>
    </message>
    <message id="192" name="MACE_MISSION_CLEAR">
      <description>Delete all mission items at once.</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
    </message>
    <message id="193" name="MACE_MISSION_ITEM_REACHED">
      <description>A certain mission item has been reached. The system will either hold this position (or circle on the orbit) or (if the autocontinue on the WP was set) continue to the next MISSION.</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="target_component">Component ID</field>
      <field type="uint8_t" name="mission_creator">Creator ID</field>
      <field type="uint8_t" name="mission_id">Mission ID</field>
      <field type="uint8_t" name="mission_type" enum="MACE_MISSION_TYPE">Mission type, see MACE_MISSION_TYPE</field>
      <field type="uint16_t" name="seq">Sequence</field>
    </message>
    <message id="194" name="MACE_VEHICLE_SYNC">
      <description>This initiates a sync request to enable the receiving mace instance to begin dumping relevant data needed to reconstruct vehicles current state.</description>
      <field type="uint8_t" name="target_system">System ID</field>
    </message>
    <message id="195" name="MACE_ROI_AG">
      <description>Message indicating the current state that was required for visiting and sensing state.</description>
      <field type="uint8_t" name="target_system">System ID</field>
      <field type="uint8_t" name="target_component">Component ID</field>
      <field type="uint8_t" name="point_discovery" enum="MACE_POINT_DISCOVERY">See POINT_DISCOVERY enum</field>
      <field type="uint8_t" name="stress_threshold" enum="MACE_STRESS_THRESHOLD">See STRESS_THRESHOLD enum</field>
      <field type="float" name="stress_value">Stress value</field>
      <field type="uint8_t" name="frame" enum="MAV_FRAME">The coordinate system of the MISSION. see MAV_FRAME in mavlink_types.h</field>
      <field type="float" name="x">PARAM5 / local: x position, global: latitude</field>
      <field type="float" name="y">PARAM6 / y position: global: longitude</field>
      <field type="float" name="z">PARAM7 / z position: global: altitude (relative or absolute, depending on frame.</field>
    </message>
  </messages>
</mavlink>
